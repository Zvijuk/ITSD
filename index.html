<!doctype html>
<label for="email">Email</label>
<input id="email" name="email" type="email" required maxlength="200" />
</div>
</div>


<div>
<label for="summary">Subject</label>
<input id="summary" name="summary" type="text" required maxlength="200" />
</div>


<div>
<label for="description">Describe the issue</label>
<textarea id="description" name="description" rows="8" required></textarea>
</div>


<!-- Honeypot antiâ€‘spam field (keep hidden) -->
<div class="hidden">
<label for="company">Company</label>
<input id="company" name="company" type="text" autocomplete="off" />
</div>


<button type="submit">Send</button>
<p id="status"></p>
</form>


<script>
const API_ENDPOINT = "https://YOUR-WORKER.your-subdomain.workers.dev/create"; // set after backend deploy


const form = document.getElementById('ticketForm');
const statusEl = document.getElementById('status');


form.addEventListener('submit', async (e) => {
e.preventDefault();
statusEl.textContent = '';


const data = {
name: form.name.value.trim(),
email: form.email.value.trim(),
summary: form.summary.value.trim(),
description: form.description.value.trim(),
honeypot: form.company.value.trim() // should stay empty
};


if (!data.name || !data.email || !data.summary || !data.description) {
statusEl.textContent = 'Please fill in all required fields.';
statusEl.className = 'err';
return;
}


try {
const res = await fetch(API_ENDPOINT, {
method: 'POST',
headers: { 'Content-Type': 'application/json' },
body: JSON.stringify(data)
});
const json = await res.json();
if (res.ok) {
statusEl.textContent = 'Request submitted. Thank you! Ticket key: ' + json.key;
statusEl.className = 'ok';
form.reset();
} else {
statusEl.textContent = json.error || 'Failed to submit. Please try again later.';
statusEl.className = 'err';
}
} catch (err) {
statusEl.textContent = 'Network error. Please try again later.';
statusEl.className = 'err';
}
});
</script>
</body>
</html>
